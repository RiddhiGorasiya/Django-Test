{% extends "myapp/base.html" %}
{% block content %}
<div class="row">
    <div class="col-sm-4">
        <h4 class="text-center alert alert-info">Add New Student</h4>
        <form action="" method="POST" novalidate>
            {% csrf_token %}
            {{form.as_p}}
            <input type="submit" class="btn btn-success" value="Add">
        </form>
        <style>
            .success{
                color:green;
            }
        </style>
        {% if messages %}
            {% for messages in messages %}
                <span class="{{messages.tags}}">{{messages}}</span>
            {% endfor %}
        {% endif %} 
    </div>
    <div class="col-sm-8">
        <h4 class="text-center alert alert-info">Show Student Information</h4>
        {% if stu %}
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Pasword</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                <form method="get" class="mb-3">
                    <input type="text" name="search" placeholder="Search by name/email" value="{{ search_query }}">
                    <input type="number" name="id_min" placeholder="Min ID" value="{{ id_min }}">
                    <input type="number" name="id_max" placeholder="Max ID" value="{{ id_max }}">
                    <select name="sort">
                        <option value="id" {% if sort_by == "id" %}selected{% endif %}>ID</option>
                        <option value="name" {% if sort_by == "name" %}selected{% endif %}>Name</option>
                        <option value="email" {% if sort_by == "email" %}selected{% endif %}>Email</option>
                    </select>
                    <select name="order">
                        <option value="asc" {% if order == "asc" %}selected{% endif %}>Ascending</option>
                        <option value="desc" {% if order == "desc" %}selected{% endif %}>Descending</option>
                    </select>
                    <button type="submit">Apply</button>
                </form>
                    {% for st in stu %}
                        <tr>
                            <th scope="row">{{st.id}}</th>
                            <td>{{st.name}}</td>
                            <td>{{st.email}}</td>
                            <td>{{st.password}}</td>
                            <td>
                                <a href="{% url "updatedata" st.id %}" class="btn btn-warning btn-sm">Edit</a>
                                <form action="{% url "deletedata" st.id %}" method="POST" class="d-inline">
                                    {% csrf_token %}
                                    <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                                </form>                         
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <h4 class="text-center alert alert-warning">No Record</h4>
        {% endif %}
        {% comment %} add Pagination {% endcomment %}
        <style>
            .pagination {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 0.1px 0;
                font-family: Arial, sans-serif;
            }

            .pagination a, 
            .pagination span {
                color: #007bff;
                text-decoration: none;
                padding: 8px 14px;
                margin: 0 4px;
                {% comment %} border: 1px solid #dee2e6; {% endcomment %}
                border-radius: 4px;
                font-size: 14px;
                transition: background-color 0.3s, color 0.3s, border-color 0.3s;
            }

            .pagination a:hover {
                background-color: #007bff;
                color: white;
                border-color: #007bff;
            }

            .pagination .current {
                background-color: #007bff;
                color: white;
                border-color: #007bff;
                cursor: default;
            }
        </style>

        <div class="pagination">
            <span>
                {% if stu.has_previous %}
                    <a href="?page={{stu.previous_page_number}}">Previous</a>
                {% endif %}
                <span class="current">
                    Page {{ stu.number }} of {{ stu.paginator.num_pages }}
                </span> 
                {% if stu.has_next %}
                    <a href="?page={{stu.next_page_number}}">Next</a>
                {% endif %}
            </span> 
        </div>
    </div>
</div>
{% endblock content %}